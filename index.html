<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />

        <title>Elixir</title>

        <link rel="stylesheet" href="dist/reset.css" />
        <link rel="stylesheet" href="dist/reveal.css" />
        <link rel="stylesheet" href="dist/theme/night.css" />

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/monokai.css" />
        <style>
            .reveal p {
                width: 100%;
                line-height: 1.5;
            }
            .reveal pre code {
              max-height: initial;
            }
            .reveal .mermaid {
              text-align: center;
              background: white;
            }
            .reveal .extra-small {
              font-size: 0.4em;
            }
        </style>

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/monokai.css" />
    </head>
    <body>
        <script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
          mermaid.initialize({ startOnLoad: true });
        </script>
        <div class="reveal">
            <div class="slides">
                <section data-markdown>
                    <textarea data-template>
#### Your stack is too damn complex.
## Let it crash with <span style="font-size: 1.5em; font-weight: bold;">Elixir</span>
---
1. Use cases
2. BEAM: The Platform
3. Elixir: The Language
---
> Elixir is a dynamic, \
> functional language \
> for building scalable
> and maintainable applications.

<small>

https://elixir-lang.org/

</small>
---
> Elixir runs on the Erlang VM (BEAM), \
> known for creating low-latency, \
> distributed, and fault-tolerant systems.

<small>

https://elixir-lang.org/

</small>
---
## Esoteric nonsense?
---
## Cisco
<img src="/img/cisco.avif" class="r-stretch" />

- 2018: ships 2 million devices per year running Erlang
- **90% of all internet traffic** going through routers and switches controlled by Erlang

<small class="extra-small">

https://www.erlang-solutions.com/blog/which-companies-are-using-erlang-and-why-mytopdogstatus/

</small>
<!-- ---
## Ericsson
- 2019: 40% market share of GPRS, 3G, 4G and 5G infrastructure
- quite likely your smartphone IP address was assigned in Erlang

<small>

https://www.erlang-solutions.com/blog/which-companies-are-using-erlang-and-why-mytopdogstatus/

</small> -->
---
## Whatsapp
- 2013: 54 billion messages in 24 hours
- 10 engineers server side (32 in total)
- per instance: 2 million TCP connections
- üìâ infra costs, team size

<small class="extra-small">

https://www.erlang-solutions.com/blog/which-companies-are-using-erlang-and-why-mytopdogstatus/

</small>
---
<!-- ## Discord

<small>

https://elixir-lang.org/blog/2020/10/08/real-time-communication-at-scale-with-elixir-at-discord/

</small>
--- -->
<!-- ## BBC
--- -->
## Cyanview
#### Camera shading @Super Bowl
<div class="r-stack">

<div>

> Reliability is king. \
> There can be no hard failures.

- 9 employees
- biggest live events in the world

<small>

https://elixir-lang.org/blog/2025/03/25/cyanview-elixir-case/

</small>
</div>
<img src="/img/cyanview.jpg" class="fragment fade-out" />
</div>

<aside class="notes">
- coordinate visual fidelity across two hundred cameras for Super Bowl
- match up in color, exposure and various other visual aspects. The goal is to turn the live event broadcast into a cohesive and consistent experience
- low-level C code and plenty of FPGA (timing requirements)
</aside>
<!-- ## FarmBot

<small>

https://elixir-lang.org/blog/2020/08/20/embedded-elixir-at-farmbot/

</small>
--- -->
<!-- ## V7 Labs
<div class="r-stack">

<div>

- data pipelines
- coordinate ML training jobs
<small class="extra-small">

https://elixir-lang.org/blog/2021/01/13/orchestrating-computer-vision-with-elixir-at-v7/

</small>
</div>

<img src="/img/v72.png" class="fragment fade-out" />
</div>
--- -->
---
## Other companies
- Discord (chat)
- BBC (web traffic)
- PepsiCo (biz intelligence)
- Remote.com (employment)
- V7 Labs (ML pipelines)
- FarmBot (embedded)
---
<!-- ## Domains
- Web development
- Embedded
- Machine learning
- Data pipelines
- Multimedia processing
--- -->
<!-- ### Great use cases
## BUT
### Erlang is so old
#### Doesn't the stack suck?
--- -->
## BEAM
#### = Erlang VM
### The hidden champion
---
<img src="/img/processes.png" />

- actor model
- message passing / shared nothing
- preemptive scheduling

<aside class="notes">

- like microservices
- separate failures
- prioritize overall system progress

</aside>
---
###  OS for your app
<img src="/img/beam-arch2.png" class="r-stretch" />

<small>

https://www.youtube.com/watch?v=JvBT4XBdoUE

</small>
---
### Kubernetes for your app
- battle tested since 1985
- distributed
- introspection
- hot code replacement
- telemetry
---
<!-- ```ex
FLAME.call(MyApp.FFMpegRunner, fn ->
  # I'm runner on a short-lived, temporary server
  tmp_dir = Path.join(System.tmp_dir!(), Ecto.UUID.generate())
  File.mkdir!(tmp_dir)
  System.cmd("ffmpeg", ~w(-i #{vid.url} -vf fps=1/#{interval} #{tmp_dir}/%02d.png))
  urls = VideoStore.put_thumbnails(vid, Path.wildcard(tmp_dir > "/*.png"))
  Repo.insert_all(Thumbnail, Enum.map(urls, &%{video_id: vid.id, url: &1}))
end)
```

<aside class="notes">

- replaces u-service
- idle down
- inline in tests

</aside>
--- -->
## üçø Demo Time


Soul of Erlang and Elixir \
[sasa1977/soul_of_erlang_and_elixir](https://github.com/sasa1977/soul_of_erlang_and_elixir)

<aside class="notes">

- http://localhost:4000
- http://localhost:4000/home

```ex
pid = pid(0, 1753, 0)
Process.info(pid, :current_stacktrace)
Runtime.trace(pid)
Process.exit(pid, :kill)
```

</aside>
---
## üçø Demo Time

[LiveBook](http://localhost:32123)
---
## üçø Demo Time

[PhoenixTest + Playwright + Tidewave](zed:///Users/ftes/src/phoenix_test_playwright_example)
---
# The End
<!-- ---
#### BEAM
<img src="/img/2-million.png" class="rstretch" />

- green: users, blue: active connections
- 40 (v)cores, 128GB mem

<small style="font-size: 0.5em;">

https://www.phoenixframework.org/blog/the-road-to-2-million-websocket-connections

</small>
--- -->
<!-- #### BEAM
### Does it all
<div style="font-size: 0.7em;">

| Technical requirement | Server A | Server B |
|--|--|--|
| HTTP server | Nginx and Phusion Passenger | BEAM |
| Request processing | Ruby on Rails | BEAM |
| Long-running requests | Go | BEAM |
| Server-wide state | Redis | BEAM |
| Persistable data | Redis and MongoDB | BEAM |
| Background jobs | Cron, Bash scripts, and Ruby | BEAM |
| Service crash recovery | Upstart | BEAM |
| PubSub | RabbitMQ | BEAM |

</div>

<small>

Sasa Juric: Erlang in Action

</small>
--- -->
<!-- ## Let it crash
### Supervision trees
<img src="/img/supervision.jpg" class="r-stretch" />

<small>

Sasa Juric: Elixir in Action

</small>
--- -->
<!-- ```ex
current_process = self()

# Spawn an Elixir process (not an operating system one!)
spawn_link(fn ->
  send(current_process, {:msg, "hello world"})

# Block until the message is received
receive do
  {:msg, contents} -> IO.puts(contents)
end
```

<pre class="mermaid">
sequenceDiagram
    create participant spawned
    current->spawned: spawn
    spawned->current: {:msg, "hello world"}
</pre>
--- -->
<!-- <div class="r-hstack">

```ex
defmodule CounterProcess do
  def loop(count) do
    receive do
      {:increment, caller} ->
        send(caller, {:count, count + 1})
        loop(count + 1)
      :crash -> raise "crash"
    end
  end
end

counters = for i <- 1..1000 do
  spawn_link(fn ->
    CounterProcess.loop(i)
  end)
end

for counter <- counters do
  message = Enum.random(
    [{:increment, self()}, :crash]
    )
  send(counter, message)
end

receive do
  {:count, value} -> value
  {:EXIT, _pid, _reason} -> :crashed
end
```

<pre class="mermaid">
sequenceDiagram
    create participant c1
    main->>c1: spawn
    create participant c2
    main->>c2: spawn
    main->>c1: {:increment, main}
    main->>c2: :crash
    destroy c2
    main--xc2: crashed
    c1->>main: {:count, 2}
</pre>

</div>
--- -->
<!-- ### BEAM vs JVM

<div style="font-size: 0.5em">

| Aspect | BEAM VM | JVM |
|--------|---------|-----|
| **Concurrency Model** | Lightweight processes (actors), message passing | Platform threads + Virtual threads (Java 21+) |
| **Memory Sharing** | No shared memory between processes | Shared memory between threads |
| **Scheduling** | Pre-emptive scheduler, reduction-based | OS-based scheduling |
| **Garbage Collection** | Per-process, non-blocking | Global, configurable collectors |
| **Hot Code Replacement** | Full production support | Limited (debugging only) |
| **Distribution** | Built-in transparent distribution | No built-in distribution primitives |

<small>

https://www.erlang-solutions.com/blog/beam-jvm-virtual-machines-comparing-and-contrasting/

</small>
</div>
--- -->
<!-- ## OOP vs. Elixir
<img src="/img/polymorphism.png" class="r-stretch" />

- Modules: define + impl behaviour
- Data: define + impl protocol
- Processes: send + recv messages

<small>

[Gang of None? Design Patterns in Elixir](https://www.youtube.com/watch?v=agkXUp0hCW8&t=1590s)

</small> -->
                  </textarea>
                </section>
            </div>
        </div>

        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/
            Reveal.initialize({
                hash: true,

                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
            });
        </script>
    </body>
</html>
